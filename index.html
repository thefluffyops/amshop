<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>AM Shop</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<script>
tailwind.config = {
darkMode: "class",
theme: {
extend: {
colors: {
bg: "#0f0f14",
card: "rgba(255,255,255,0.06)",
accent: "#007AFF"
}
}
}
}
</script>

<style>
body{
background:
radial-gradient(circle at 20% 20%, rgba(0,122,255,0.15), transparent 40%),
radial-gradient(circle at 80% 80%, rgba(0,122,255,0.1), transparent 40%),
linear-gradient(180deg,#0f0f14,#1a1a22);
}

/* Floating Cart */
.floating-cart{
position:fixed;
bottom:30px;
left:50%;
transform:translateX(-50%);
width:70px;
height:70px;
border-radius:9999px;
background:#007AFF;
display:flex;
align-items:center;
justify-content:center;
color:white;
font-size:26px;
box-shadow:0 20px 40px rgba(0,0,0,0.6);
transition:.3s;
z-index:50;
}
.floating-cart:active{
transform:translateX(-50%) scale(.9);
}

.cart-screen{
position:fixed;
inset:0;
background:#111118;
transform:translateY(100%);
transition:.4s cubic-bezier(.4,0,.2,1);
z-index:100;
overflow-y:auto;
}
.cart-screen.active{
transform:translateY(0);
}
</style>
</head>

<body class="text-white">

<div class="max-w-xl mx-auto p-6 pb-40">

<h1 class="text-4xl font-bold mb-2">AM Shop</h1>
<p class="text-white/50 mb-10">Premium selection</p>

<div id="products" class="space-y-6"></div>

</div>

<!-- Floating Cart -->
<div class="floating-cart" id="cartBtn">
ðŸ›’
<span id="cartCount" class="absolute -top-1 -right-1 bg-red-500 text-xs px-2 py-1 rounded-full">0</span>
</div>

<!-- Fullscreen Cart -->
<div id="cartScreen" class="cart-screen p-6">

<h2 class="text-2xl font-bold mb-6">Votre commande</h2>

<div id="cartItems" class="space-y-4 mb-6"></div>

<div class="text-right font-bold text-lg mb-6">
Total: <span id="cartTotal">0</span> â‚¬
</div>

<select id="modeSelect" class="w-full p-3 rounded-xl bg-card mb-4">
<option value="SUR_PLACE">Sur place</option>
<option value="COLIS">Colis</option>
<option value="LIVRAISON">Livraison</option>
</select>

<input id="nameInput" placeholder="Nom"
class="w-full p-3 rounded-xl bg-card mb-4">

<input id="phoneInput" placeholder="TÃ©lÃ©phone"
class="w-full p-3 rounded-xl bg-card mb-4">

<input id="addressInput" placeholder="Adresse"
class="w-full p-3 rounded-xl bg-card mb-6 hidden">

<button id="orderBtn"
class="w-full bg-accent p-4 rounded-xl font-bold text-lg">
Commander
</button>

<button onclick="closeCart()" class="w-full mt-4 text-white/50">
Fermer
</button>

</div>

<script>

const tg = window.Telegram?.WebApp;
tg?.ready();
tg?.expand();

const CONTACT_USERNAME="TON_USERNAME";

const PRODUCTS=[
{id:"A1",name:"Frozen",price:15,rate:31,country:"USA"},
{id:"A2",name:"Cali US",price:20,rate:28,country:"USA"},
{id:"A3",name:"Cali NL",price:10,rate:24,country:"Pays-Bas"}
];

let cart={};

const productsDiv=document.getElementById("products");
const cartCount=document.getElementById("cartCount");
const cartItems=document.getElementById("cartItems");
const cartTotalEl=document.getElementById("cartTotal");

function renderProducts(){
productsDiv.innerHTML="";
PRODUCTS.forEach(p=>{
const div=document.createElement("div");
div.className="bg-card backdrop-blur-xl p-6 rounded-2xl shadow-lg";

div.innerHTML=`
<div class="flex justify-between items-start">
<div>
<div class="text-xl font-bold">${p.name}</div>
<div class="text-sm opacity-60 mt-1">${p.rate}% â€¢ ${p.country}</div>
<div class="mt-3 font-semibold">${p.price}â‚¬ / gramme</div>
</div>
<button onclick="addToCart('${p.id}')"
class="bg-accent px-4 py-2 rounded-xl font-semibold">
Ajouter
</button>
</div>
`;

productsDiv.appendChild(div);
});
}

function addToCart(id){
cart[id]=(cart[id]||0)+1;
updateCart();
}

function updateCart(){
let total=0;
let count=0;
cartItems.innerHTML="";

Object.entries(cart).forEach(([id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
total+=p.price*qty;
count+=qty;

const div=document.createElement("div");
div.className="flex justify-between items-center bg-card p-4 rounded-xl";

div.innerHTML=`
<div>
<div>${p.name}</div>
<div class="text-sm opacity-60">${p.price}â‚¬ x ${qty}</div>
</div>
<div class="flex items-center gap-2">
<button onclick="changeQty('${id}',-1)" class="px-3 bg-white/10 rounded">-</button>
<span>${qty}</span>
<button onclick="changeQty('${id}',1)" class="px-3 bg-white/10 rounded">+</button>
</div>
`;

cartItems.appendChild(div);
});

cartCount.textContent=count;
cartTotalEl.textContent=total;
}

function changeQty(id,delta){
cart[id]+=delta;
if(cart[id]<=0) delete cart[id];
updateCart();
}

function openCart(){
document.getElementById("cartScreen").classList.add("active");
}
function closeCart(){
document.getElementById("cartScreen").classList.remove("active");
}

document.getElementById("cartBtn").onclick=openCart;

document.getElementById("modeSelect").onchange=(e)=>{
document.getElementById("addressInput").classList.toggle("hidden",
e.target.value!=="LIVRAISON");
};

renderProducts();

</script>

</body>
</html>
