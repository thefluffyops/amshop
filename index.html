<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AM Shop</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<script>
tailwind.config = {
darkMode:"class",
theme:{
extend:{
colors:{
iosAccent:"#0A84FF"
}
}
}
}
</script>

<style>
body{
background:
radial-gradient(circle at 15% 20%, rgba(10,132,255,0.12), transparent 40%),
radial-gradient(circle at 85% 80%, rgba(10,132,255,0.08), transparent 40%),
linear-gradient(180deg,#0c0c13,#151522);
overflow-x:hidden;
}

/* Glass */
.glass{
backdrop-filter: blur(28px);
background: rgba(255,255,255,0.05);
border:1px solid rgba(255,255,255,0.07);
}

/* Product animation */
.product-card{
opacity:0;
transform:translateY(60px);
transition:.7s cubic-bezier(.16,1,.3,1);
}
.product-card.show{
opacity:1;
transform:translateY(0);
}

/* Floating cart */
.floating-cart{
position:fixed;
bottom:26px;
left:50%;
transform:translateX(-50%);
width:64px;
height:64px;
border-radius:9999px;
background:linear-gradient(145deg,#0A84FF,#0066ff);
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
color:white;
box-shadow:
0 18px 50px rgba(0,0,0,0.6),
0 0 25px rgba(10,132,255,0.4);
transition:.4s cubic-bezier(.16,1,.3,1);
z-index:50;
}
.floating-cart.bump{
transform:translateX(-50%) scale(1.15);
}

/* Cart screen */
.cart-screen{
position:fixed;
inset:0;
background:rgba(15,15,25,0.94);
backdrop-filter: blur(50px);
transform:translateY(100%);
transition:.6s cubic-bezier(.16,1,.3,1);
z-index:100;
overflow-y:auto;
padding:28px;
}
.cart-screen.active{
transform:translateY(0);
}

input, select{
background:rgba(255,255,255,0.04);
border:1px solid rgba(255,255,255,0.06);
font-size:14px;
padding:12px;
border-radius:14px;
outline:none;
}
button{
font-size:14px;
}
</style>
</head>

<body class="text-white">

<div class="max-w-md mx-auto px-5 pt-14 pb-32">

<h1 class="text-4xl font-semibold mb-1">AM Shop</h1>
<p class="text-white/40 mb-10 text-sm">Premium Selection</p>

<div id="products" class="space-y-6"></div>

</div>

<!-- Floating Cart -->
<div class="floating-cart" id="cartBtn">
ðŸ›’
<span id="cartCount"
class="absolute -top-1 -right-1 bg-red-500 text-[10px] px-1.5 py-0.5 rounded-full">
0
</span>
</div>

<!-- Cart Screen -->
<div id="cartScreen" class="cart-screen">

<h2 class="text-2xl font-semibold mb-6">Votre commande</h2>

<div id="cartItems" class="space-y-3 mb-6"></div>

<div class="text-right text-lg font-semibold mb-6">
Total: <span id="cartTotal">0</span> â‚¬
</div>

<select id="mode" class="w-full mb-3">
<option value="SUR_PLACE">Sur place</option>
<option value="COLIS">Colis</option>
<option value="LIVRAISON">Livraison</option>
</select>

<input id="blaze" placeholder="Blaze" class="w-full mb-3">

<div id="addressFields" class="space-y-3 hidden">
<input id="address" placeholder="Adresse" class="w-full">
<input id="postal" placeholder="Code postal" class="w-full">
<input id="city" placeholder="Ville" class="w-full">
</div>

<button id="orderBtn"
class="w-full bg-iosAccent py-3 rounded-xl mt-5 font-medium active:scale-95 transition">
Commander
</button>

<button onclick="closeCart()" class="w-full mt-5 text-white/40 text-sm">
Fermer
</button>

</div>

<script>

const tg = window.Telegram?.WebApp;
tg?.ready();
tg?.expand();
const haptic = tg?.HapticFeedback;

/* ðŸ”¥ ENVOI MODIFIÃ‰ ICI */
const CONTACT_USERNAME="giopvst";

const PRODUCTS=[
{id:"A1",name:"Frozen",price:15,rate:31,country:"USA"},
{id:"A2",name:"Cali US",price:20,rate:28,country:"USA"},
{id:"A3",name:"Cali NL",price:10,rate:24,country:"Pays-Bas"}
];

let cart={};

const productsDiv=document.getElementById("products");
const cartCount=document.getElementById("cartCount");
const cartBtn=document.getElementById("cartBtn");
const cartItems=document.getElementById("cartItems");
const cartTotalEl=document.getElementById("cartTotal");

function renderProducts(){
PRODUCTS.forEach((p,i)=>{
const div=document.createElement("div");
div.className="product-card glass p-5 rounded-2xl";
div.innerHTML=`
<div class="flex justify-between items-start">
<div>
<div class="text-lg font-medium">${p.name}</div>
<div class="text-xs opacity-50">${p.rate}% â€¢ ${p.country}</div>
<div class="mt-2 text-sm">${p.price}â‚¬ / g</div>
</div>
<button onclick="addToCart('${p.id}')"
class="bg-iosAccent px-4 py-1.5 rounded-lg text-sm">
Ajouter
</button>
</div>
`;
productsDiv.appendChild(div);
setTimeout(()=>div.classList.add("show"),150*i);
});
}

function addToCart(id){
cart[id]=(cart[id]||0)+1;
updateCart();
cartBtn.classList.add("bump");
setTimeout(()=>cartBtn.classList.remove("bump"),250);
haptic?.impactOccurred("medium");
}

function updateCart(){
let total=0;
let count=0;
cartItems.innerHTML="";
Object.entries(cart).forEach(([id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
total+=p.price*qty;
count+=qty;
cartItems.innerHTML+=`
<div class="glass p-3 rounded-xl flex justify-between text-sm">
<div>${p.name} x${qty}</div>
<div>${p.price*qty}â‚¬</div>
</div>`;
});
cartCount.textContent=count;
cartTotalEl.textContent=total;
}

function openCart(){
document.getElementById("cartScreen").classList.add("active");
haptic?.impactOccurred("heavy");
}
function closeCart(){
document.getElementById("cartScreen").classList.remove("active");
}

cartBtn.onclick=openCart;

document.getElementById("mode").onchange=(e)=>{
document.getElementById("addressFields")
.classList.toggle("hidden",e.target.value==="SUR_PLACE");
};

document.getElementById("orderBtn").onclick=()=>{

if(Object.keys(cart).length===0){
alert("Panier vide");
return;
}

const mode=document.getElementById("mode").value;
const blaze=document.getElementById("blaze").value;
const address=document.getElementById("address").value;
const postal=document.getElementById("postal").value;
const city=document.getElementById("city").value;

if(!blaze){
alert("Blaze obligatoire");
return;
}

if(mode!=="SUR_PLACE" && (!address||!postal||!city)){
alert("Adresse complÃ¨te requise");
return;
}

let message="ðŸ“¦ Commande AM Shop\n\n";
Object.entries(cart).forEach(([id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
message+=`â€¢ ${p.name} x${qty} = ${p.price*qty}â‚¬\n`;
});
message+=`\nMode: ${mode}\nBlaze: ${blaze}\n`;

if(mode!=="SUR_PLACE"){
message+=`Adresse: ${address}\nCP: ${postal}\nVille: ${city}\n`;
}

window.open(`https://t.me/${CONTACT_USERNAME}?text=${encodeURIComponent(message)}`);
};

renderProducts();

</script>

</body>
</html>
