<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AM Shop</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
darkMode:"class",
theme:{
extend:{
colors:{
bg:"#0B1020",
card:"#111827",
accent:"#FFD400",
accent2:"#FFB800"
},
boxShadow:{
soft:"0 20px 40px rgba(0,0,0,0.5)"
}
}
}
}
</script>

<style>
body{
background:
radial-gradient(circle at 15% 20%, rgba(255,212,0,0.08), transparent 40%),
radial-gradient(circle at 85% 80%, rgba(255,184,0,0.06), transparent 40%),
linear-gradient(180deg,#0B1020 0%,#0F172A 100%);
}

/* Glow effect */
.card-glow{
position:relative;
overflow:hidden;
}
.card-glow::before{
content:"";
position:absolute;
top:-50%;
left:-50%;
width:200%;
height:200%;
background:radial-gradient(circle, rgba(255,212,0,0.08), transparent 40%);
opacity:0;
transition:opacity .4s;
}
.card-glow:hover::before{
opacity:1;
}
</style>
</head>

<body class="text-white min-h-screen">

<div class="max-w-4xl mx-auto p-5 pb-40">

<div class="mb-10">
<h1 class="text-4xl font-black bg-gradient-to-r from-accent to-accent2 bg-clip-text text-transparent">
AM Shop
</h1>
<p class="text-sm opacity-60 mt-1">
Premium selection ‚Ä¢ Qualit√© sup√©rieure
</p>
</div>

<div id="products" class="grid gap-6"></div>

</div>

<!-- CART FLOATING -->
<div id="cartBar"
class="fixed bottom-6 left-4 right-4 bg-gradient-to-r from-card to-bg backdrop-blur-xl border border-white/10 p-4 flex justify-between items-center cursor-pointer shadow-soft rounded-2xl">

<div>
<div class="font-bold text-lg">üõí Panier</div>
<div id="cartInfo" class="text-sm opacity-70">0 article</div>
</div>

<div id="cartCount"
class="bg-accent text-black font-bold px-4 py-1 rounded-full shadow">
0
</div>

</div>

<!-- OVERLAY -->
<div id="overlay"
class="fixed inset-0 bg-black/60 hidden backdrop-blur-sm"></div>

<!-- SHEET -->
<div id="sheet"
class="fixed left-0 right-0 bottom-0 bg-card rounded-t-3xl p-6 translate-y-full transition-transform duration-300 max-h-[90vh] overflow-y-auto shadow-soft">

<h2 class="text-xl font-black mb-4">Votre commande</h2>

<div id="cartItems" class="space-y-3 mb-4"></div>

<div class="border-t border-white/10 pt-4 space-y-3">

<input id="name" placeholder="Nom"
class="w-full p-3 bg-bg rounded-2xl">

<input id="phone" placeholder="T√©l√©phone"
class="w-full p-3 bg-bg rounded-2xl">

<button id="orderBtn"
class="w-full bg-gradient-to-r from-accent to-accent2 text-black font-bold p-3 rounded-2xl shadow active:scale-95 transition">
Commander
</button>

</div>

</div>

<script>

const tg = window.Telegram?.WebApp;
tg?.ready();
tg?.expand();

const CONTACT_USERNAME = "TON_USERNAME";

const PRODUCTS = [
{id:"A1",name:"Frozen",price:15,rate:31,country:"USA"},
{id:"A2",name:"Cali US",price:20,rate:28,country:"USA"},
{id:"A3",name:"Cali NL",price:10,rate:24,country:"Pays-Bas"}
];

let cart = JSON.parse(localStorage.getItem("am_cart")||"{}");

const productsDiv=document.getElementById("products");
const cartBar=document.getElementById("cartBar");
const sheet=document.getElementById("sheet");
const overlay=document.getElementById("overlay");
const cartItems=document.getElementById("cartItems");
const cartInfo=document.getElementById("cartInfo");
const cartCount=document.getElementById("cartCount");

function saveCart(){
localStorage.setItem("am_cart",JSON.stringify(cart));
renderCart();
}

function cartTotal(){
return Object.entries(cart).reduce((total,[id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
return total + (p.price*qty);
},0);
}

function cartCountTotal(){
return Object.values(cart).reduce((a,b)=>a+b,0);
}

/* PRODUCTS */
function renderProducts(){
productsDiv.innerHTML="";

PRODUCTS.forEach(p=>{

const qty = cart[p.id] || 0;

const div=document.createElement("div");
div.className="card-glow bg-card/70 backdrop-blur-xl p-6 rounded-3xl shadow-soft border border-white/5 transition hover:scale-[1.03] duration-300";

div.innerHTML=`
<div class="flex justify-between items-start">

<div>
<div class="text-xl font-extrabold">${p.name}</div>

<div class="flex items-center gap-2 mt-3">
<span class="bg-accent text-black text-xs font-bold px-3 py-1 rounded-full shadow">
${p.rate}%
</span>

<span class="bg-white/10 text-xs px-3 py-1 rounded-full">
üåç ${p.country}
</span>
</div>

<div class="mt-4 text-2xl font-bold">
${p.price}‚Ç¨
<span class="text-xs opacity-60 font-medium">/ gramme</span>
</div>
</div>

</div>

<div class="mt-5">

${
qty === 0
? `<button class="addBtn w-full bg-gradient-to-r from-accent to-accent2 text-black py-3 rounded-2xl font-bold shadow active:scale-95 transition">
Ajouter au panier
</button>`
: `
<div class="flex items-center justify-between bg-bg rounded-2xl p-3">
<button class="dec bg-card px-4 py-1 rounded-xl text-lg active:scale-95 transition">-</button>
<span class="font-bold text-lg">${qty}</span>
<button class="inc bg-card px-4 py-1 rounded-xl text-lg active:scale-95 transition">+</button>
</div>
`
}

</div>
`;

if(qty === 0){
div.querySelector(".addBtn").onclick=()=>{
cart[p.id]=1;
saveCart();
renderProducts();
};
}else{
div.querySelector(".inc").onclick=()=>{
cart[p.id]++;
saveCart();
renderProducts();
};
div.querySelector(".dec").onclick=()=>{
cart[p.id]--;
if(cart[p.id]<=0) delete cart[p.id];
saveCart();
renderProducts();
};
}

productsDiv.appendChild(div);
});
}

/* CART BAR */
function renderCart(){
const count=cartCountTotal();
cartCount.textContent=count;
cartInfo.textContent=count>0
? count+" article(s) ‚Ä¢ "+cartTotal()+" ‚Ç¨"
: "Panier vide";
}

/* SHEET */
function openSheet(){
overlay.classList.remove("hidden");
sheet.classList.remove("translate-y-full");
renderSheet();
}

function closeSheet(){
overlay.classList.add("hidden");
sheet.classList.add("translate-y-full");
}

function renderSheet(){
cartItems.innerHTML="";
Object.entries(cart).forEach(([id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
const line=document.createElement("div");
line.className="flex justify-between bg-bg p-3 rounded-2xl";
line.innerHTML=`
<div>${p.name} x${qty}</div>
<div>${p.price*qty} ‚Ç¨</div>
`;
cartItems.appendChild(line);
});
}

document.getElementById("orderBtn").onclick=()=>{
if(cartCountTotal()===0){
alert("Panier vide");
return;
}
window.open(`https://t.me/${CONTACT_USERNAME}`);
};

cartBar.onclick=openSheet;
overlay.onclick=closeSheet;

renderProducts();
renderCart();

</script>

</body>
</html>
