<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<title>AM Shop</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7@8/framework7-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/framework7@8/framework7-bundle.min.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
background:linear-gradient(180deg,#0f0f14,#1b1b24);
}

/* Floating Cart Button */
.floating-cart{
position:fixed;
bottom:30px;
left:50%;
transform:translateX(-50%);
width:70px;
height:70px;
border-radius:50%;
background:#007aff;
display:flex;
align-items:center;
justify-content:center;
font-size:28px;
color:white;
box-shadow:0 20px 40px rgba(0,0,0,0.6);
z-index:999;
cursor:pointer;
transition:0.3s;
}
.floating-cart:active{
transform:translateX(-50%) scale(0.9);
}
.badge{
position:absolute;
top:-5px;
right:-5px;
background:red;
color:white;
font-size:12px;
padding:3px 7px;
border-radius:20px;
}

/* Fullscreen Cart */
.cart-fullscreen{
position:fixed;
inset:0;
background:#111118;
z-index:1000;
transform:translateY(100%);
transition:0.4s cubic-bezier(.4,0,.2,1);
overflow-y:auto;
padding:30px;
}
.cart-fullscreen.active{
transform:translateY(0);
}

.product-card{
background:rgba(255,255,255,0.05);
border-radius:20px;
padding:20px;
margin-bottom:20px;
backdrop-filter:blur(20px);
box-shadow:0 10px 30px rgba(0,0,0,0.4);
}
.rate{
background:#007aff;
padding:4px 10px;
border-radius:20px;
font-size:12px;
color:white;
margin-right:10px;
}
.country{
opacity:0.6;
font-size:12px;
}
</style>
</head>

<body>

<div id="app">

<div class="page-content" style="padding:25px;">

<h1 style="font-size:34px;font-weight:700;color:white;">AM Shop</h1>
<p style="color:rgba(255,255,255,0.5);margin-bottom:30px;">
Premium Selection
</p>

<div id="productList"></div>

</div>

</div>

<!-- Floating Cart -->
<div class="floating-cart" id="cartBtn">
ðŸ›’
<span class="badge" id="cartCount">0</span>
</div>

<!-- Fullscreen Cart -->
<div class="cart-fullscreen" id="cartScreen">

<h2 style="color:white;font-size:26px;margin-bottom:20px;">Votre commande</h2>

<div id="cartItems" style="margin-bottom:30px;"></div>

<select id="modeSelect" style="width:100%;padding:12px;border-radius:12px;margin-bottom:15px;">
<option value="SUR_PLACE">Sur place</option>
<option value="COLIS">Colis</option>
<option value="LIVRAISON">Livraison</option>
</select>

<input id="nameInput" placeholder="Nom"
style="width:100%;padding:12px;border-radius:12px;margin-bottom:15px;" />

<input id="phoneInput" placeholder="TÃ©lÃ©phone"
style="width:100%;padding:12px;border-radius:12px;margin-bottom:15px;" />

<input id="addressInput" placeholder="Adresse"
style="width:100%;padding:12px;border-radius:12px;margin-bottom:15px;display:none;" />

<button id="orderBtn"
style="width:100%;padding:15px;border-radius:15px;background:#007aff;color:white;font-size:18px;font-weight:600;">
Commander
</button>

<button onclick="closeCart()"
style="margin-top:20px;width:100%;background:none;color:white;opacity:0.6;">
Fermer
</button>

</div>

<script>

const tg = window.Telegram?.WebApp;
tg?.ready();
tg?.expand();

const CONTACT_USERNAME="TON_USERNAME";

const PRODUCTS=[
{id:"A1",name:"Frozen",price:15,rate:31,country:"USA"},
{id:"A2",name:"Cali US",price:20,rate:28,country:"USA"},
{id:"A3",name:"Cali NL",price:10,rate:24,country:"Pays-Bas"}
];

let cart={};

const productList=document.getElementById("productList");
const cartCount=document.getElementById("cartCount");
const cartItems=document.getElementById("cartItems");

function renderProducts(){
productList.innerHTML="";
PRODUCTS.forEach(p=>{
const div=document.createElement("div");
div.className="product-card";
div.innerHTML=`
<div style="color:white;font-size:20px;font-weight:600;">${p.name}</div>
<div style="margin:8px 0;">
<span class="rate">${p.rate}%</span>
<span class="country">${p.country}</span>
</div>
<div style="color:white;margin-bottom:10px;">${p.price}â‚¬ / gramme</div>
<button onclick="addToCart('${p.id}')"
style="padding:8px 15px;border-radius:12px;background:#007aff;color:white;">
Ajouter
</button>
`;
productList.appendChild(div);
});
}

function addToCart(id){
cart[id]=(cart[id]||0)+1;
updateCart();
}

function updateCart(){
let total=0;
let count=0;
cartItems.innerHTML="";

Object.entries(cart).forEach(([id,qty])=>{
const p=PRODUCTS.find(x=>x.id===id);
total+=p.price*qty;
count+=qty;

const div=document.createElement("div");
div.style="color:white;margin-bottom:10px;";
div.innerHTML=`${p.name} x${qty} - ${p.price*qty}â‚¬`;
cartItems.appendChild(div);
});

cartCount.textContent=count;
}

function openCart(){
document.getElementById("cartScreen").classList.add("active");
}
function closeCart(){
document.getElementById("cartScreen").classList.remove("active");
}

document.getElementById("cartBtn").onclick=openCart;

document.getElementById("modeSelect").onchange=(e)=>{
document.getElementById("addressInput").style.display=
e.target.value==="LIVRAISON"?"block":"none";
};

renderProducts();

</script>

</body>
</html>
